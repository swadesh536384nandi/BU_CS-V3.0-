<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Signup Page with Unique email </title>
    <script src="https://cdn.tailwindcss.com"></script>
	
	<link href="https://cdn.jsdelivr.net/npm/daisyui@4.12.23/dist/full.min.css" rel="stylesheet" type="text/css" />
	 <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"></link>
	 <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet"/>
	 <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&amp;display=swap" rel="stylesheet"/>
	 <link rel="icon" href="https://lh3.googleusercontent.com/pw/AP1GczPab7wnbN20LeQrgjPgDjkCU7CIifEd13hvp1GEMA9PKc0xFGzUzP5GofVm3mC33isjjRJmxb1MT0jArj8ctnvDAhZnXz1JV95Ry-0KrajSYO45_EmgX8NxyYooGR_jkj9P6RAZmWhkjnu1on7tQbGgwQ=w455-h786-s-no?authuser=0" size="32x32">
	<style>
		body {
			 
			background-image: url("https://lh3.googleusercontent.com/pw/AP1GczO28VRdQUuRGc68ioYIIWvOzfUujJdlB4VFD84mswNZjsnA2rAU2Tgd-8m10vWucAJYlDQi-zpq0yIhnwQ_b0gypzfVP8IriYPOhjWmUyPPrqdxvov28v7spoC67M9N-_FLb1HdiDEtwu0WnArGYEv_=w615-h811-s-no-gm?authuser=0"); 
			background-size: cover;
			background-repeat: no-repeat;
			background-position: center;
		}
		.input{
			background-color: white;
		}
	</style>
</head>


   

<script>
        document.addEventListener('contextmenu', function(e) {
            e.preventDefault();
        });

        document.addEventListener('keydown', function(e) {
            // Disable Ctrl+C and Ctrl+U
            if ((e.ctrlKey && (e.key === 'c' || e.key === 'u'))||(e.Key ==='Prt sc')) {
                e.preventDefault();
            }
        });
		const express = require('express');
		const app = express();

		app.get('/set-cookie', (req, res) => {
		res.cookie('sessionId', 'your-session-id', {
        httpOnly: true, // Prevents JavaScript access
        secure: true,   // Ensures the cookie is sent only over HTTPS
        sameSite: 'Strict' // Controls cross-origin requests
		});
		res.send('Secure cookie set!');
		});

		app.listen(3000, () => {
		console.log('Server is running on https://localhost:3000');
		});
    </script>   

<body class="bg-green-50 min-h-screen flex items-center justify-center">
    <div class="bg-yellow-100 p-8 rounded-3xl shadow-2xl w-96">
        <h2 class="text-3xl font-extrabold text-center text-pink-600 mb-6">Create Your Account</h2>
        <form method="POST" name="google-sheet" class="space-y-5 ">
			<label class="text-2xl text-black">Full Name:
				<input autofocus type="text" name="Name" placeholder="Full Name" required
					class="bg-white w-full px-4 py-3 border border-pink-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-pink-400">
			</label>
			<label class="text-2xl text-black">Email:
				<input type="email" name="Email" placeholder="Email Address" required
					class="bg-white w-full px-4 py-3 border border-pink-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-pink-400">
			</label>
			<label class="text-2xl text-black">Phone Number:	
				<input type="text" name="Phone" placeholder="Phone Number" required
					pattern="[0-9]{10}" title="Phone number must be exactly 10 digits." maxlength="10"
					class="bg-white w-full px-4 py-3 border border-pink-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-pink-400">
			</label>
			<label class="text-2xl text-black">Date of Birth:
				<input type="date" name="DOB" placeholder="Date of Birth" required
					class="bg-white w-full px-4 py-3 border border-pink-300 rounded-xl text-gray-500 focus:outline-none focus:ring-2 focus:ring-pink-400">
            </label>
			<label class="text-2xl text-black">Gender:
				<select name="Gender" required
					class="bg-white w-full px-4 py-3 border border-pink-300 rounded-xl text-gray-500 focus:outline-none focus:ring-2 focus:ring-pink-400">
					<option value="">Select Gender</option>
					<option value="Male">Male</option>
					<option value="Female">Female</option>
					<option value="Other">Other</option>
				</select>
			</label>
			<label class="text-2xl text-black">password:
				<input type="password" name="Password" placeholder="Password" required
					pattern="^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&]{8,12}$"
					title="Password must be 8-12 chars with 1 letter, 1 digit, and 1 special character."
					class="bg-white w-full px-4 py-3 border border-pink-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-pink-400">
			</label>
            <button type="submit" name="submit" class="submit-btn w-full bg-gradient-to-r from-pink-500 to-purple-500 text-white py-3 rounded-xl font-semibold text-lg shadow-lg hover:from-pink-600 hover:to-purple-600 transition duration-300">
                <span class="submit-text">Sign Up Now</span>
                <svg class="hidden h-5 w-5 animate-spin mx-auto text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                </svg>
            </button>
            <p id="success-message" class="text-4xl hidden text-center font-semibold mt-4"></p>
        </form>
		
        <p class="text-2xl text-center text-black mt-4">
            Already have an account?
            <a href="Login.html" class="text-pink-600 font-semibold hover:underline">Login</a>
        </p>
    </div>
    
    <script>
        const scriptURL = 'https://script.google.com/macros/s/AKfycbw50NCqPZhPSqfGXKyI4zX-tmtFPUwTVLyC2qEdoMsTbNMiLeUIYwIaU1iEPYjxEW3F/exec';  // ðŸ”— Replace with your Web App URL
        const form = document.forms['google-sheet'];
        const message = document.getElementById('success-message');
        const submitButton = document.querySelector('.submit-btn');

        // Sanitize user inputs
        function sanitizeInput(input) {
            return input ? input.toString().replace(/</g, "&lt;").replace(/>/g, "&gt;") : "";
        }

        form.addEventListener('submit', e => {
            e.preventDefault();
            submitButton.disabled = true;
            submitButton.querySelector('.submit-text').classList.add('hidden');
            submitButton.querySelector('svg').classList.remove('hidden');

            const formData = new FormData(form);
            formData.set('Name', sanitizeInput(formData.get('Name')));

            fetch(scriptURL, { method: 'POST', body: formData })
                .then(response => response.json())
                .then(data => {
                    if (data.result === "success") {
						alert("âœ…signing up! successfully done");
                        message.textContent = "âœ…signing up! successfully done.wellcome to the computer Science department";
                        message.classList.remove('hidden', 'text-red-600');
                        message.classList.add('text-green-600');
                        form.reset();
						window.location.href = "Login.html";
                    } else if (data.result === "duplicate") {
						alert("Phone number already registered.");
                        message.textContent = "âš ï¸ Email number already registered.";
                        message.classList.remove('hidden', 'text-green-600');
                        message.classList.add('text-red-600');
						window.location.href = "Login.html";
                    } else if (data.result === "invalid") {
						alert("Invalid input.");
                        message.textContent = "âš ï¸ " + data.message || "Invalid input.";
                        message.classList.remove('hidden', 'text-green-600');
                        message.classList.add('text-red-600');
                    } else {
                        message.textContent = "âš ï¸ Error: " + (data.message || "Please try again.");
                        message.classList.remove('hidden', 'text-green-600');
                        message.classList.add('text-red-600');
                    }
                })
                .catch(error => {
                    console.error('Full error:', error);
                    message.textContent = "âŒ Server error. Please try again later.";
                    message.classList.remove('hidden', 'text-green-600');
                    message.classList.add('text-red-600');
                })
                .finally(() => {
                    submitButton.disabled = false;
                    submitButton.querySelector('.submit-text').classList.remove('hidden');
                    submitButton.querySelector('svg').classList.add('hidden');
                });
        });
    </script>
</body>
</html>
